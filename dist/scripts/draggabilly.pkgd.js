/*!
 * Draggabilly PACKAGED v2.1.0
 * Make that shiz draggable
 * http://draggabilly.desandro.com
 * MIT license
 */(function(e,t){typeof define=="function"&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(n){t(e,n)}):typeof module=="object"&&module.exports?module.exports=t(e,require("jquery")):e.jQueryBridget=t(e,e.jQuery)})(window,function(e,t){var a=Array.prototype.slice,n=e.console,s=typeof n=="undefined"?function(){}:function(e){n.error(e)};function o(o,r,n){if(n=n||t||e.jQuery,!n)return;r.prototype.option||(r.prototype.option=function(e){if(!n.isPlainObject(e))return;this.options=n.extend(!0,this.options,e)}),n.fn[o]=function(e){if(typeof e=="string"){var t=a.call(arguments,1);return c(this,e,t)}return l(this,e),this};function c(i,t,r){var a="$()."+o+'("'+t+'")',e;return i.each(function(u,d){var i=n.data(d,o),c,l;if(!i){s(o+" not initialized. Cannot call methods, i.e. "+a);return}if(c=i[t],!c||t.charAt(0)=="_"){s(a+" is not a valid method");return}l=c.apply(i,r),e=e===void 0?l:e}),e!==void 0?e:i}function l(t,e){t.each(function(i,s){var t=n.data(s,o);t?(t.option(e),t._init()):(t=new r(s,e),n.data(s,o,t))})}i(n)}function i(e){if(!e||e&&e.bridget)return;e.bridget=o}return i(t||e.jQuery),o}),function(t,e){typeof define=="function"&&define.amd?define("get-size/get-size",[],function(){return e()}):typeof module=="object"&&module.exports?module.exports=e():t.getSize=e()}(window,function(){var o,e,t,n,i;function s(e){var t=parseFloat(e),n=e.indexOf("%")==-1&&!isNaN(t);return n&&t}function c(){}o=typeof console=="undefined"?c:function(e){console.error(e)},e=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],t=e.length;function l(){for(var s={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0,o;n<t;n++)o=e[n],s[o]=0;return s}function a(t){var e=getComputedStyle(t);return e||o("Style returned "+e+". Are you running this code in a hidden iframe on Firefox? "+"See http://bit.ly/getsizebug1"),e}n=!1;function d(){var e,t,o;if(n)return;n=!0,e=document.createElement("div"),e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box",t=document.body||document.documentElement,t.appendChild(e),o=a(e),r.isBoxSizeOuter=i=s(o.width)==200,t.removeChild(e)}function r(o){var r,n,O,c,m,w,p,b,g,_,y,u,v,f,h,j;if(d(),typeof o=="string"&&(o=document.querySelector(o)),!o||typeof o!="object"||!o.nodeType)return;if(r=a(o),r.display=="none")return l();n={},n.width=o.offsetWidth,n.height=o.offsetHeight,O=n.isBorderBox=r.boxSizing=="border-box";for(c=0;c<t;c++)m=e[c],w=r[m],p=parseFloat(w),n[m]=isNaN(p)?0:p;return b=n.paddingLeft+n.paddingRight,g=n.paddingTop+n.paddingBottom,_=n.marginLeft+n.marginRight,y=n.marginTop+n.marginBottom,u=n.borderLeftWidth+n.borderRightWidth,v=n.borderTopWidth+n.borderBottomWidth,f=O&&i,h=s(r.width),h!==!1&&(n.width=h+(f?0:b+u)),j=s(r.height),j!==!1&&(n.height=j+(f?0:g+v)),n.innerWidth=n.width-(b+u),n.innerHeight=n.height-(g+v),n.outerWidth=n.width+_,n.outerHeight=n.height+y,n}return r}),function(t,e){typeof define=="function"&&define.amd?define("ev-emitter/ev-emitter",e):typeof module=="object"&&module.exports?module.exports=e():t.EvEmitter=e()}(this,function(){function t(){}var e=t.prototype;return e.on=function(e,t){var n,s;if(!e||!t)return;return n=this._events=this._events||{},s=n[e]=n[e]||[],s.indexOf(t)==-1&&s.push(t),this},e.once=function(e,t){var n,s;if(!e||!t)return;return this.on(e,t),n=this._onceEvents=this._onceEvents||{},s=n[e]=n[e]||[],s[t]=!0,this},e.off=function(n,s){var e=this._events&&this._events[n],t;if(!e||!e.length)return;return t=e.indexOf(s),t!=-1&&e.splice(t,1),this},e.emitEvent=function(o,i){var t=this._events&&this._events[o],n,e,s,a;if(!t||!t.length)return;for(n=0,e=t[n],i=i||[],s=this._onceEvents&&this._onceEvents[o];e;)a=s&&s[e],a&&(this.off(o,e),delete s[e]),e.apply(this,i),n+=a?0:1,e=t[n];return this},t}),function(e,t){typeof define=="function"&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(n){return t(e,n)}):typeof module=="object"&&module.exports?module.exports=t(e,require("ev-emitter")):e.Unipointer=t(e,e.EvEmitter)}(window,function(t,o){var e,s;function i(){}function n(){}return e=n.prototype=Object.create(o.prototype),e.bindStartEvent=function(e){this._bindStartEvent(e,!0)},e.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},e._bindStartEvent=function(e,n){n=n===void 0||!!n;var s=n?"addEventListener":"removeEventListener";t.navigator.pointerEnabled?e[s]("pointerdown",this):t.navigator.msPointerEnabled?e[s]("MSPointerDown",this):(e[s]("mousedown",this),e[s]("touchstart",this))},e.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},e.getTouch=function(n){for(var e=0,t;e<n.length;e++)if(t=n[e],t.identifier==this.pointerIdentifier)return t},e.onmousedown=function(e){var t=e.button;if(t&&t!==0&&t!==1)return;this._pointerDown(e,e)},e.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},e.onMSPointerDown=e.onpointerdown=function(e){this._pointerDown(e,e)},e._pointerDown=function(t,e){if(this.isPointerDown)return;this.isPointerDown=!0,this.pointerIdentifier=e.pointerId!==void 0?e.pointerId:e.identifier,this.pointerDown(t,e)},e.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])},s={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]},e._bindPostStartEvents=function(e){if(!e)return;var n=s[e.type];n.forEach(function(e){t.addEventListener(e,this)},this),this._boundPointerEvents=n},e._unbindPostStartEvents=function(){if(!this._boundPointerEvents)return;this._boundPointerEvents.forEach(function(e){t.removeEventListener(e,this)},this),delete this._boundPointerEvents},e.onmousemove=function(e){this._pointerMove(e,e)},e.onMSPointerMove=e.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},e.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},e._pointerMove=function(e,t){this.pointerMove(e,t)},e.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},e.onmouseup=function(e){this._pointerUp(e,e)},e.onMSPointerUp=e.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},e.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},e._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},e.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},e._pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this._unbindPostStartEvents(),this.pointerDone()},e.pointerDone=i,e.onMSPointerCancel=e.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},e.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},e._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},e.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},n.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},n}),function(e,t){typeof define=="function"&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(n){return t(e,n)}):typeof module=="object"&&module.exports?module.exports=t(e,require("unipointer")):e.Unidragger=t(e,e.Unipointer)}(window,function(o,t){var e,n;function i(){}function s(){}return e=s.prototype=Object.create(t.prototype),e.bindHandles=function(){this._bindHandles(!0)},e.unbindHandles=function(){this._bindHandles(!1)},n=o.navigator,e._bindHandles=function(e){var t,a,s,o;e=e===void 0||!!e,n.pointerEnabled?t=function(t){t.style.touchAction=e?"none":''}:n.msPointerEnabled?t=function(t){t.style.msTouchAction=e?"none":''}:t=i,a=e?"addEventListener":"removeEventListener";for(s=0;s<this.handles.length;s++)o=this.handles[s],this._bindStartEvent(o,e),t(o),o[a]("click",this)},e.pointerDown=function(e,n){if(e.target.nodeName=="INPUT"&&e.target.type=="range"){this.isPointerDown=!1,delete this.pointerIdentifier;return}this._dragPointerDown(e,n);var t=document.activeElement;t&&t.blur&&t.blur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,n])},e._dragPointerDown=function(e,n){this.pointerDownPoint=t.getPointerPoint(n);var s=this.canPreventDefaultOnPointerDown(e,n);s&&e.preventDefault()},e.canPreventDefaultOnPointerDown=function(e){return e.target.nodeName!="SELECT"},e.pointerMove=function(e,t){var n=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,n]),this._dragMove(e,t,n)},e._dragPointerMove=function(o,e){var n=t.getPointerPoint(e),s={x:n.x-this.pointerDownPoint.x,y:n.y-this.pointerDownPoint.y};return!this.isDragging&&this.hasDragStarted(s)&&this._dragStart(o,e),s},e.hasDragStarted=function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3},e.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},e._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},e._dragStart=function(n,e){this.isDragging=!0,this.dragStartPoint=t.getPointerPoint(e),this.isPreventingClicks=!0,this.dragStart(n,e)},e.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},e._dragMove=function(e,t,n){if(!this.isDragging)return;this.dragMove(e,t,n)},e.dragMove=function(e,t,n){e.preventDefault(),this.emitEvent("dragMove",[e,t,n])},e._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},e.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},e.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},e._staticClick=function(e,n){if(this.isIgnoringMouseUp&&e.type=="mouseup")return;var t=e.target.nodeName;(t=="INPUT"||t=="TEXTAREA")&&e.target.focus(),this.staticClick(e,n),e.type!="mouseup"&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400))},e.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},s.getPointerPoint=t.getPointerPoint,s}),function(e,t){typeof define=="function"&&define.amd?define(["get-size/get-size","unidragger/unidragger"],function(n,s){return t(e,n,s)}):typeof module=="object"&&module.exports?module.exports=t(e,require("get-size"),require("unidragger")):e.Draggabilly=t(e,e.getSize,e.Unidragger)}(window,function(o,d,h){var i=o.document,a,c,u,t,s,e;function m(){}function l(e,t){for(var n in t)e[n]=t[n];return e}function f(e){return e instanceof HTMLElement}a=o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame,c=0,a||(a=function(n){var e=(new Date).getTime(),t=Math.max(0,16-(e-c)),s=setTimeout(n,t);return c=e+t,s}),u=i.documentElement,t=typeof u.style.transform=="string"?"transform":"WebkitTransform",s=o.jQuery;function n(e,t){this.element=typeof e=="string"?i.querySelector(e):e,s&&(this.$element=s(this.element)),this.options=l({},this.constructor.defaults),this.option(t),this._create()}e=n.prototype=Object.create(h.prototype),n.defaults={},e.option=function(e){l(this.options,e)},e._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=l({},this.position);var e=getComputedStyle(this.element);e.position!="relative"&&e.position!="absolute"&&(this.element.style.position="relative"),this.enable(),this.setHandles()},e.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},e.dispatchEvent=function(e,t,n){var a=[t].concat(n),s,i;this.emitEvent(e,a),s=o.jQuery,s&&this.$element&&(t?(i=s.Event(t),i.type=e,this.$element.trigger(i,n)):this.$element.trigger(e,n))},n.prototype._getPosition=function(){var e=getComputedStyle(this.element),t=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)},n.prototype._getPositionCoord=function(e,t){if(e.indexOf("%")!=-1){var n=d(this.element.parentNode);return parseFloat(e)/100*n[t]}return parseInt(e,10)},e._addTransformPosition=function(a){var e=a[t],n,s,o,i;if(e.indexOf("matrix")!==0)return;n=e.split(","),s=e.indexOf("matrix3d")===0?12:4,o=parseInt(n[s],10),i=parseInt(n[s+1],10),this.position.x+=o,this.position.y+=i},e.pointerDown=function(t,n){this._dragPointerDown(t,n);var e=i.activeElement;e&&e.blur&&e!=i.body&&e.blur(),this._bindPostStartEvents(t),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",t,[n])},e.pointerMove=function(e,t){var n=this._dragPointerMove(e,t);this.dispatchEvent("pointerMove",e,[t,n]),this._dragMove(e,t,n)},e.dragStart=function(e,t){if(!this.isEnabled)return;this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",e,[t]),this.animate()},e.measureContainment=function(){var t=this.options.containment,n,s,e,o,a,c,l,r;if(!t)return;n=f(t)?t:typeof t=="string"?i.querySelector(t):this.element.parentNode,s=d(this.element),e=d(n),o=this.element.getBoundingClientRect(),a=n.getBoundingClientRect(),c=e.borderLeftWidth+e.borderRightWidth,l=e.borderTopWidth+e.borderBottomWidth,r=this.relativeStartPosition={x:o.left-(a.left+e.borderLeftWidth),y:o.top-(a.top+e.borderTopWidth)},this.containSize={width:e.width-c-r.x-s.width,height:e.height-l-r.y-s.height}},e.dragMove=function(a,c,i){var e,t,n,s,o;if(!this.isEnabled)return;e=i.x,t=i.y,n=this.options.grid,s=n&&n[0],o=n&&n[1],e=r(e,s),t=r(t,o),e=this.containDrag("x",e,s),t=this.containDrag("y",t,o),e=this.options.axis=="y"?0:e,t=this.options.axis=="x"?0:t,this.position.x=this.startPosition.x+e,this.position.y=this.startPosition.y+t,this.dragPoint.x=e,this.dragPoint.y=t,this.dispatchEvent("dragMove",a,[c,i])};function r(n,e,t){return t=t||"round",e?Math[t](n/e)*e:n}return e.containDrag=function(a,t,n){var s,o,i,e;return this.options.containment?(s=a=="x"?"width":"height",o=this.relativeStartPosition[a],i=r(-o,n,"ceil"),e=this.containSize[s],e=r(e,n,"floor"),Math.min(e,Math.max(i,t))):t},e.pointerUp=function(e,t){this.element.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",e,[t]),this._dragPointerUp(e,t)},e.dragEnd=function(e,n){if(!this.isEnabled)return;t&&(this.element.style[t]='',this.setLeftTop()),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",e,[n])},e.animate=function(){if(!this.isDragging)return;this.positionDrag();var e=this;a(function(){e.animate()})},e.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},e.positionDrag=function(){this.element.style[t]="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},e.staticClick=function(e,t){this.dispatchEvent("staticClick",e,[t])},e.enable=function(){this.isEnabled=!0},e.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},e.destroy=function(){this.disable(),this.element.style[t]='',this.element.style.left='',this.element.style.top='',this.element.style.position='',this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},e._init=m,s&&s.bridget&&s.bridget("draggabilly",n),n})