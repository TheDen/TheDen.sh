/*!
 * Draggabilly PACKAGED v2.1.0
 * Make that shiz draggable
 * http://draggabilly.desandro.com
 * MIT license
 */(function(e,t){typeof define=="function"&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(n){t(e,n)}):typeof module=="object"&&module.exports?module.exports=t(e,require("jquery")):e.jQueryBridget=t(e,e.jQuery)})(window,function(e,t){var a=Array.prototype.slice,n=e.console,s=typeof n=="undefined"?function(){}:function(e){n.error(e)};function o(n,o,r){if(r=r||t||e.jQuery,!r)return;o.prototype.option||(o.prototype.option=function(e){if(!r.isPlainObject(e))return;this.options=r.extend(!0,this.options,e)}),r.fn[n]=function(e){if(typeof e=="string"){var t=a.call(arguments,1);return c(this,e,t)}return l(this,e),this};function c(e,t,o){var i,a="$()."+n+'("'+t+'")';return e.each(function(e,c){var l,u,d=r.data(c,n);if(!d){s(n+" not initialized. Cannot call methods, i.e. "+a);return}if(l=d[t],!l||t.charAt(0)=="_"){s(a+" is not a valid method");return}u=l.apply(d,o),i=i===void 0?u:i}),i!==void 0?i:e}function l(e,t){e.each(function(e,s){var i=r.data(s,n);i?(i.option(t),i._init()):(i=new o(s,t),r.data(s,n,i))})}i(r)}function i(e){if(!e||e&&e.bridget)return;e.bridget=o}return i(t||e.jQuery),o}),function(e,t){typeof define=="function"&&define.amd?define("get-size/get-size",[],function(){return t()}):typeof module=="object"&&module.exports?module.exports=t():e.getSize=t()}(window,function(){var e,t,n,o,i;function s(e){var t=parseFloat(e),n=e.indexOf("%")==-1&&!isNaN(t);return n&&t}function c(){}o=typeof console=="undefined"?c:function(e){console.error(e)},e=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],t=e.length;function l(){for(var s,o={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},n=0;n<t;n++)s=e[n],o[s]=0;return o}function a(e){var t=getComputedStyle(e);return t||o("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),t}n=!1;function d(){var e,t,o;if(n)return;n=!0,e=document.createElement("div"),e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box",t=document.body||document.documentElement,t.appendChild(e),o=a(e),r.isBoxSizeOuter=i=s(o.width)==200,t.removeChild(e)}function r(n){var o,r,c,u,h,m,f,p,g,v,b,j,y,_,w,O;if(d(),typeof n=="string"&&(n=document.querySelector(n)),!n||typeof n!="object"||!n.nodeType)return;if(r=a(n),r.display=="none")return l();o={},o.width=n.offsetWidth,o.height=n.offsetHeight,O=o.isBorderBox=r.boxSizing=="border-box";for(c=0;c<t;c++)h=e[c],w=r[h],f=parseFloat(w),o[h]=isNaN(f)?0:f;return p=o.paddingLeft+o.paddingRight,b=o.paddingTop+o.paddingBottom,_=o.marginLeft+o.marginRight,y=o.marginTop+o.marginBottom,u=o.borderLeftWidth+o.borderRightWidth,v=o.borderTopWidth+o.borderBottomWidth,m=O&&i,g=s(r.width),g!==!1&&(o.width=g+(m?0:p+u)),j=s(r.height),j!==!1&&(o.height=j+(m?0:b+v)),o.innerWidth=o.width-(p+u),o.innerHeight=o.height-(b+v),o.outerWidth=o.width+_,o.outerHeight=o.height+y,o}return r}),function(e,t){typeof define=="function"&&define.amd?define("ev-emitter/ev-emitter",t):typeof module=="object"&&module.exports?module.exports=t():e.EvEmitter=t()}(this,function(){function t(){}var e=t.prototype;return e.on=function(e,t){var n,s;if(!e||!t)return;return n=this._events=this._events||{},s=n[e]=n[e]||[],s.indexOf(t)==-1&&s.push(t),this},e.once=function(e,t){var n,s;if(!e||!t)return;return this.on(e,t),n=this._onceEvents=this._onceEvents||{},s=n[e]=n[e]||[],s[t]=!0,this},e.off=function(e,t){var s,n=this._events&&this._events[e];if(!n||!n.length)return;return s=n.indexOf(t),s!=-1&&n.splice(s,1),this},e.emitEvent=function(e,t){var n,s,o,a,i=this._events&&this._events[e];if(!i||!i.length)return;for(s=0,n=i[s],t=t||[],o=this._onceEvents&&this._onceEvents[e];n;)a=o&&o[n],a&&(this.off(e,n),delete o[n]),n.apply(this,t),s+=a?0:1,n=i[s];return this},t}),function(e,t){typeof define=="function"&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(n){return t(e,n)}):typeof module=="object"&&module.exports?module.exports=t(e,require("ev-emitter")):e.Unipointer=t(e,e.EvEmitter)}(window,function(e,t){var n,o;function i(){}function s(){}return n=s.prototype=Object.create(t.prototype),n.bindStartEvent=function(e){this._bindStartEvent(e,!0)},n.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},n._bindStartEvent=function(t,n){n=n===void 0||!!n;var s=n?"addEventListener":"removeEventListener";e.navigator.pointerEnabled?t[s]("pointerdown",this):e.navigator.msPointerEnabled?t[s]("MSPointerDown",this):(t[s]("mousedown",this),t[s]("touchstart",this))},n.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},n.getTouch=function(e){for(var t,n=0;n<e.length;n++)if(t=e[n],t.identifier==this.pointerIdentifier)return t},n.onmousedown=function(e){var t=e.button;if(t&&t!==0&&t!==1)return;this._pointerDown(e,e)},n.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},n.onMSPointerDown=n.onpointerdown=function(e){this._pointerDown(e,e)},n._pointerDown=function(e,t){if(this.isPointerDown)return;this.isPointerDown=!0,this.pointerIdentifier=t.pointerId!==void 0?t.pointerId:t.identifier,this.pointerDown(e,t)},n.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])},o={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"],MSPointerDown:["MSPointerMove","MSPointerUp","MSPointerCancel"]},n._bindPostStartEvents=function(t){if(!t)return;var n=o[t.type];n.forEach(function(t){e.addEventListener(t,this)},this),this._boundPointerEvents=n},n._unbindPostStartEvents=function(){if(!this._boundPointerEvents)return;this._boundPointerEvents.forEach(function(t){e.removeEventListener(t,this)},this),delete this._boundPointerEvents},n.onmousemove=function(e){this._pointerMove(e,e)},n.onMSPointerMove=n.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},n.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},n._pointerMove=function(e,t){this.pointerMove(e,t)},n.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},n.onmouseup=function(e){this._pointerUp(e,e)},n.onMSPointerUp=n.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},n.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},n._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},n.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},n._pointerDone=function(){this.isPointerDown=!1,delete this.pointerIdentifier,this._unbindPostStartEvents(),this.pointerDone()},n.pointerDone=i,n.onMSPointerCancel=n.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},n.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},n._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},n.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},s.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},s}),function(e,t){typeof define=="function"&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(n){return t(e,n)}):typeof module=="object"&&module.exports?module.exports=t(e,require("unipointer")):e.Unidragger=t(e,e.Unipointer)}(window,function(e,t){var n,s;function i(){}function o(){}return n=o.prototype=Object.create(t.prototype),n.bindHandles=function(){this._bindHandles(!0)},n.unbindHandles=function(){this._bindHandles(!1)},s=e.navigator,n._bindHandles=function(e){var t,n,o,a;e=e===void 0||!!e,s.pointerEnabled?t=function(t){t.style.touchAction=e?"none":""}:s.msPointerEnabled?t=function(t){t.style.msTouchAction=e?"none":""}:t=i,a=e?"addEventListener":"removeEventListener";for(n=0;n<this.handles.length;n++)o=this.handles[n],this._bindStartEvent(o,e),t(o),o[a]("click",this)},n.pointerDown=function(e,t){if(e.target.nodeName=="INPUT"&&e.target.type=="range"){this.isPointerDown=!1,delete this.pointerIdentifier;return}this._dragPointerDown(e,t);var n=document.activeElement;n&&n.blur&&n.blur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])},n._dragPointerDown=function(e,n){this.pointerDownPoint=t.getPointerPoint(n);var s=this.canPreventDefaultOnPointerDown(e,n);s&&e.preventDefault()},n.canPreventDefaultOnPointerDown=function(e){return e.target.nodeName!="SELECT"},n.pointerMove=function(e,t){var n=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,n]),this._dragMove(e,t,n)},n._dragPointerMove=function(e,n){var s=t.getPointerPoint(n),o={x:s.x-this.pointerDownPoint.x,y:s.y-this.pointerDownPoint.y};return!this.isDragging&&this.hasDragStarted(o)&&this._dragStart(e,n),o},n.hasDragStarted=function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3},n.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},n._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},n._dragStart=function(e,n){this.isDragging=!0,this.dragStartPoint=t.getPointerPoint(n),this.isPreventingClicks=!0,this.dragStart(e,n)},n.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},n._dragMove=function(e,t,n){if(!this.isDragging)return;this.dragMove(e,t,n)},n.dragMove=function(e,t,n){e.preventDefault(),this.emitEvent("dragMove",[e,t,n])},n._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},n.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},n.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},n._staticClick=function(e,t){if(this.isIgnoringMouseUp&&e.type=="mouseup")return;var n=e.target.nodeName;(n=="INPUT"||n=="TEXTAREA")&&e.target.focus(),this.staticClick(e,t),e.type!="mouseup"&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400))},n.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},o.getPointerPoint=t.getPointerPoint,o}),function(e,t){typeof define=="function"&&define.amd?define(["get-size/get-size","unidragger/unidragger"],function(n,s){return t(e,n,s)}):typeof module=="object"&&module.exports?module.exports=t(e,require("get-size"),require("unidragger")):e.Draggabilly=t(e,e.getSize,e.Unidragger)}(window,function(e,t,n){var s,o,i,c,d,h,r=e.document;function m(){}function u(e,t){for(var n in t)e[n]=t[n];return e}function f(e){return e instanceof HTMLElement}c=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame,d=0,c||(c=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-d)),s=setTimeout(e,n);return d=t+n,s}),h=r.documentElement,o=typeof h.style.transform=="string"?"transform":"WebkitTransform",i=e.jQuery;function a(e,t){this.element=typeof e=="string"?r.querySelector(e):e,i&&(this.$element=i(this.element)),this.options=u({},this.constructor.defaults),this.option(t),this._create()}s=a.prototype=Object.create(n.prototype),a.defaults={},s.option=function(e){u(this.options,e)},s._create=function(){this.position={},this._getPosition(),this.startPoint={x:0,y:0},this.dragPoint={x:0,y:0},this.startPosition=u({},this.position);var e=getComputedStyle(this.element);e.position!="relative"&&e.position!="absolute"&&(this.element.style.position="relative"),this.enable(),this.setHandles()},s.setHandles=function(){this.handles=this.options.handle?this.element.querySelectorAll(this.options.handle):[this.element],this.bindHandles()},s.dispatchEvent=function(t,n,s){var o,i,a=[n].concat(s);this.emitEvent(t,a),o=e.jQuery,o&&this.$element&&(n?(i=o.Event(n),i.type=t,this.$element.trigger(i,s)):this.$element.trigger(t,s))},a.prototype._getPosition=function(){var e=getComputedStyle(this.element),t=this._getPositionCoord(e.left,"width"),n=this._getPositionCoord(e.top,"height");this.position.x=isNaN(t)?0:t,this.position.y=isNaN(n)?0:n,this._addTransformPosition(e)},a.prototype._getPositionCoord=function(e,n){if(e.indexOf("%")!=-1){var s=t(this.element.parentNode);return parseFloat(e)/100*s[n]}return parseInt(e,10)},s._addTransformPosition=function(e){var t,n,i,a,s=e[o];if(s.indexOf("matrix")!==0)return;t=s.split(","),n=s.indexOf("matrix3d")===0?12:4,i=parseInt(t[n],10),a=parseInt(t[n+1],10),this.position.x+=i,this.position.y+=a},s.pointerDown=function(e,t){this._dragPointerDown(e,t);var n=r.activeElement;n&&n.blur&&n!=r.body&&n.blur(),this._bindPostStartEvents(e),this.element.classList.add("is-pointer-down"),this.dispatchEvent("pointerDown",e,[t])},s.pointerMove=function(e,t){var n=this._dragPointerMove(e,t);this.dispatchEvent("pointerMove",e,[t,n]),this._dragMove(e,t,n)},s.dragStart=function(e,t){if(!this.isEnabled)return;this._getPosition(),this.measureContainment(),this.startPosition.x=this.position.x,this.startPosition.y=this.position.y,this.setLeftTop(),this.dragPoint.x=0,this.dragPoint.y=0,this.element.classList.add("is-dragging"),this.dispatchEvent("dragStart",e,[t]),this.animate()},s.measureContainment=function(){var e,s,o,i,a,c,l,d,n=this.options.containment;if(!n)return;s=f(n)?n:typeof n=="string"?r.querySelector(n):this.element.parentNode,o=t(this.element),e=t(s),i=this.element.getBoundingClientRect(),a=s.getBoundingClientRect(),l=e.borderLeftWidth+e.borderRightWidth,d=e.borderTopWidth+e.borderBottomWidth,c=this.relativeStartPosition={x:i.left-(a.left+e.borderLeftWidth),y:i.top-(a.top+e.borderTopWidth)},this.containSize={width:e.width-l-c.x-o.width,height:e.height-d-c.y-o.height}},s.dragMove=function(e,t,n){var s,o,i,a,r;if(!this.isEnabled)return;s=n.x,o=n.y,i=this.options.grid,a=i&&i[0],r=i&&i[1],s=l(s,a),o=l(o,r),s=this.containDrag("x",s,a),o=this.containDrag("y",o,r),s=this.options.axis=="y"?0:s,o=this.options.axis=="x"?0:o,this.position.x=this.startPosition.x+s,this.position.y=this.startPosition.y+o,this.dragPoint.x=s,this.dragPoint.y=o,this.dispatchEvent("dragMove",e,[t,n])};function l(e,t,n){return n=n||"round",t?Math[n](e/t)*t:e}return s.containDrag=function(e,t,n){var s,o,i,a;return this.options.containment?(o=e=="x"?"width":"height",i=this.relativeStartPosition[e],a=l(-i,n,"ceil"),s=this.containSize[o],s=l(s,n,"floor"),Math.min(s,Math.max(a,t))):t},s.pointerUp=function(e,t){this.element.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",e,[t]),this._dragPointerUp(e,t)},s.dragEnd=function(e,t){if(!this.isEnabled)return;o&&(this.element.style[o]="",this.setLeftTop()),this.element.classList.remove("is-dragging"),this.dispatchEvent("dragEnd",e,[t])},s.animate=function(){if(!this.isDragging)return;this.positionDrag();var e=this;c(function(){e.animate()})},s.setLeftTop=function(){this.element.style.left=this.position.x+"px",this.element.style.top=this.position.y+"px"},s.positionDrag=function(){this.element.style[o]="translate3d( "+this.dragPoint.x+"px, "+this.dragPoint.y+"px, 0)"},s.staticClick=function(e,t){this.dispatchEvent("staticClick",e,[t])},s.enable=function(){this.isEnabled=!0},s.disable=function(){this.isEnabled=!1,this.isDragging&&this.dragEnd()},s.destroy=function(){this.disable(),this.element.style[o]="",this.element.style.left="",this.element.style.top="",this.element.style.position="",this.unbindHandles(),this.$element&&this.$element.removeData("draggabilly")},s._init=m,i&&i.bridget&&i.bridget("draggabilly",a),a})