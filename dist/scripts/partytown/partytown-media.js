(e=>{const[n,o,t,j,b,u,i,r,v]=e.g;delete e.g;const m=Symbol(),a=Symbol(),d=Symbol(),l=Symbol(),c=Symbol(),h=Symbol(),f=[],s=(e,t,n)=>e[t]=p(t,n),p=(e,t)=>Object.defineProperty(t,"name",{value:e}),y=(e,n)=>{const c={getContext:{value(e,t){return this[m]||(this[m]=(e.includes("webgl")?h:d)(this,e,t)),this[m]}}},a=s(n,"CanvasGradient",class extends e{addColorStop(...e){t(this,["addColorStop"],e,2)}}),l=s(n,"CanvasPattern",class extends e{setTransform(...e){t(this,["setTransform"],e,2)}}),d=(e,n,s)=>{const d=e[i],h=u(),l={[i]:d,[r]:h,[v]:[]},c=t(e,["getContext"],[n,s],1,h),m="getContextAttributes,getImageData,getLineDash,getTransform,isPointInPath,isPointInStroke,measureText".split(","),f={get:(e,n)=>"string"==typeof n&&n in c?"function"==typeof c[n]?(...e)=>{if(n.startsWith("create")){const o=u();return t(l,[n],e,2,o),"createImageData"===n||"createPattern"===n?(s=`${n}()`,console.warn(`${s} not implemented`),{setTransform:()=>{}}):new a(d,o)}var s;const o=m.includes(n)?1:2;return t(l,[n],e,o)}:c[n]:e[n],set:(e,t,n)=>("string"==typeof t&&t in c?(c[t]!==n&&"function"!=typeof n&&o(l,[t],n),c[t]=n):e[t]=n,!0)};return new Proxy(c,f)},h=(e,n,s)=>{const d=e[i],c=u(),l={[i]:d,[r]:c,[v]:[]},a=t(e,["getContext"],[n,s],1,c),h={get:(e,n)=>"string"==typeof n?"function"!=typeof a[n]?a[n]:(...e)=>t(l,[n],e,p(n)):e[n],set:(e,t,n)=>("string"==typeof t&&t in a?(a[t]!==n&&"function"!=typeof n&&o(l,[t],n),a[t]=n):e[t]=n,!0)};return new Proxy(a,h)},f="checkFramebufferStatus,makeXRCompatible".split(","),p=e=>e.startsWith("create")||e.startsWith("get")||e.startsWith("is")||f.includes(e)?1:2;s(n,"CanvasGradient",a),s(n,"CanvasPattern",l),b(n.HTMLCanvasElement,c)},_=(e,m,v,y)=>{var O,x;y.Audio=p("HTMLAudioElement",class{constructor(e){const t=v.k("audio",u());return t.src=e,t}});const C=class extends e{get enabled(){return n(this,["enabled"])}set enabled(e){o(this,["enabled"],e)}get id(){return n(this,["id"])}get kind(){return n(this,["kind"])}get label(){return n(this,["label"])}get language(){return n(this,["language"])}get sourceBuffer(){return new k(this)}},E=class{constructor(e){const s="audioTracks",o=e[i],a=e[r];return new Proxy({addEventListener(...n){t(e,[s,"addEventListener"],n,3)},getTrackById:(...n)=>t(e,[s,"getTrackById"],n),get length(){return n(e,[s,"length"])},removeEventListener(...n){t(e,[s,"removeEventListener"],n,3)}},{get:(e,t)=>"number"==typeof t?new C(o,a,[s,t]):e[t]})}},F=s(y,"SourceBufferList",class extends Array{constructor(e){super(),this[a]=e}addEventListener(...e){t(this[a],["sourceBuffers","addEventListener"],e,3)}removeEventListener(...e){t(this[a],["sourceBuffers","removeEventListener"],e,3)}}),k=s(y,"SourceBuffer",(x=class extends m{constructor(e){super(e[i],e[r],["sourceBuffers"]),this[O]=[],this[a]=e}abort(){const e=_(this);t(this,[e,"appendWindowStart"],f,1)}addEventListener(...e){const n=_(this);t(this,[n,"addEventListener"],e,3)}appendBuffer(e){this[c].push(["appendBuffer",[e],e]),w(this)}get appendWindowStart(){const e=_(this);return n(this,[e,"appendWindowStart"])}set appendWindowStart(e){const t=_(this);o(this,[t,"appendWindowStart"],e)}get appendWindowEnd(){const e=_(this);return n(this,[e,"appendWindowEnd"])}set appendWindowEnd(e){const t=_(this);o(this,[t,"appendWindowEnd"],e)}get buffered(){const e=this[a],t=_(this);return new A(e[i],e[r],["sourceBuffers",t,"buffered"])}changeType(e){const n=_(this);t(this,[n,"changeType"],[e],2)}get mode(){const e=_(this);return n(this,[e,"mode"])}set mode(e){const t=_(this);o(this,[t,"mode"],e)}remove(e,t){this[c].push(["remove",[e,t]]),w(this)}removeEventListener(...e){const n=_(this);t(this,[n,"removeEventListener"],e,3)}get timestampOffset(){const e=_(this);return n(this,[e,"timestampOffset"])}set timestampOffset(e){const t=_(this);o(this,[t,"timestampOffset"],e)}get updating(){const e=_(this);return n(this,[e,"updating"])}},O=c,x)),A=s(y,"TimeRanges",class extends e{start(...e){return t(this,["start"],e)}end(...e){return t(this,["end"],e)}get length(){return n(this,["length"])}}),_=e=>e?e[a][l].indexOf(e):-1,w=e=>{if(e[c].length){if(!e.updating){const n=e[c].shift();if(n){const s=_(e);t(e,[s,n[0]],n[1],3,void 0,n[2])}}setTimeout(()=>w(e),50)}},S={buffered:{get(){return this[h]||(this[h]=new A(this[i],this[r],["buffered"]),setTimeout(()=>{this[h]=void 0},5e3)),this[h]}},readyState:{get(){return 4===this[d]?4:("number"!=typeof this[d]&&(this[d]=n(this,["readyState"]),setTimeout(()=>{this[d]=void 0},1e3)),this[d])}}};s(y,"MediaSource",class extends m{constructor(){super(v.V),this[l]=new F(this),j(this,"MediaSource",f)}get activeSourceBuffers(){return[]}addSourceBuffer(e){const n=new k(this);return this[l].push(n),t(this,["addSourceBuffer"],[e]),n}clearLiveSeekableRange(){t(this,["clearLiveSeekableRange"],f,2)}get duration(){return n(this,["duration"])}set duration(e){o(this,["duration"],e)}endOfStream(e){t(this,["endOfStream"],[e],3)}get readyState(){return n(this,["readyState"])}removeSourceBuffer(e){const n=_(e);n>-1&&(this[l].splice(n,1),t(this,["removeSourceBuffer"],[n],1))}setLiveSeekableRange(e,n){t(this,["setLiveSeekableRange"],[e,n],2)}get sourceBuffers(){return this[l]}static isTypeSupported(e){if(!g.has(e)){const n=t(y,["MediaSource","isTypeSupported"],[e]);g.set(e,n)}return g.get(e)}});const M=y.URL=p("URL",class extends URL{});"audioTracks"in y.HTMLMediaElement.prototype&&(s(y,"AudioTrackList",E),s(y,"AudioTrack",C),S.audioTracks={get(){return new E(this)}}),b(y.HTMLMediaElement,S),M.createObjectURL=e=>t(y,["URL","createObjectURL"],[e]),M.revokeObjectURL=e=>t(y,["URL","revokeObjectURL"],[e])},g=new Map;e.f=(e,t,n,s,o)=>{o.map(e=>{delete s[e]}),y(e,s),_(e,t,n,s)}})(self)